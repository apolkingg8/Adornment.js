{"version":3,"sources":["G:\\GitHub\\decorate_js\\src\\autoBind.jsx"],"names":[],"mappings":";;;;;;;;uBAAoB,WAAW;;;;AAE/B,SAAS,kBAAkB,CAAC,UAAU,EAAE,GAAG,EAAE;AACzC,QAAI,MAAM,GAAG,qBAAQ,SAAS,CAAC,UAAU,CAAC,CAAA;;AAE1C,WAAO,UAAU,CAAC,KAAK,CAAA;AACvB,WAAO,UAAU,CAAC,QAAQ,CAAA;;AAE1B,cAAU,CAAC,GAAG,GAAG,SAAS,SAAS,CAAC,SAAS,EAAE;AAC3C,YAAI,QAAQ,kBAAgB,GAAG,AAAE,CAAA;;AAEjC,YAAG,CAAC,SAAS,EAAE;AACX,gBAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,SAAS,EAAE;AAC9B,sBAAM,CAAC,cAAc,CAAC,IAAI,EAAE,QAAQ,EAAE;AAClC,8BAAU,EAAE,KAAK;AACjB,gCAAY,EAAE,KAAK;AACnB,yBAAK,EAAE,IAAI;iBACd,CAAC,CAAA;;AAEF,uBAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;aAC3B,MAAM;AACH,uBAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAA;aACrC;SACJ,MAAM;AACH,mBAAO,MAAM,CAAA;SAChB;KACJ,CAAA;;AAED,cAAU,CAAC,WAAW,GAAG,KAAK,CAAA;;AAE9B,WAAO,UAAU,CAAA;CACpB;;AAED,SAAS,WAAW,CAAC,MAAgB,EAAE;;AAEnC,yBAAQ,mBAAmB,CAAC,MAAM,EAAE,UAAS,GAAG,EAAE;;AAE9C,YAAG,OAAO,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,UAAU,EAAE;AAC5C,gBAAI,UAAU,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,CAAA;;AAEvE,kBAAM,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,EAAE,kBAAkB,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC,CAAA;SACpF;KACJ,CAAC,CAAA;;AAEF,WAAO,MAAM,CAAA;CAChB;;AAED,SAAS,YAAY,CAAC,MAAgB,EAAE,GAAW,EAAE,UAAU,EAAE;;;AAG7D,cAAU,GAAG,kBAAkB,CAAC,UAAU,EAAE,GAAG,CAAC,CAAA;;AAEhD,WAAO,UAAU,CAAA;CACpB;;AAED,SAAS,UAAU,CAAC,MAAgB,EAAE,GAAW,EAAE,UAAU,EAAE;AAC3D,WAAO,CAAC,IAAI,iDAAiD,CAAA;AAC7D,WAAO,UAAU,CAAA;CACpB;;AAED,SAAS,QAAQ,GAAU;sCAAN,IAAI;AAAJ,YAAI;;;AACrB,yBAAQ,OAAO,CAAC,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,YAAY,EAAE,UAAU,CAAC,CAAA;CACrE;;qBAEc,QAAQ","file":"autoBind.js","sourcesContent":["import Helpers from './_helper'\r\n\r\nfunction _descriptorHandler(descriptor, key) {\r\n    var method = Helpers.getMethod(descriptor)\r\n\r\n    delete descriptor.value\r\n    delete descriptor.writable\r\n\r\n    descriptor.get = function _autoBind(delayBind) {\r\n        var propName = `_autoBind_${key}`\r\n\r\n        if(!delayBind) {\r\n            if (this[propName] === undefined) {\r\n                Object.defineProperty(this, propName, {\r\n                    enumerable: false,\r\n                    configurable: false,\r\n                    value: this\r\n                })\r\n\r\n                return method.bind(this)\r\n            } else {\r\n                return method.bind(this[propName])\r\n            }\r\n        } else {\r\n            return method\r\n        }\r\n    }\r\n\r\n    descriptor._autoBinded = false\r\n\r\n    return descriptor\r\n}\r\n\r\nfunction handleClass(target: Function) {\r\n\r\n    Helpers.forEachClassOwnKeys(target, function(key) {\r\n\r\n        if(typeof target.prototype[key] === \"function\") {\r\n            var descriptor = Object.getOwnPropertyDescriptor(target.prototype, key)\r\n\r\n            Object.defineProperty(target.prototype, key, _descriptorHandler(descriptor, key))\r\n        }\r\n    })\r\n\r\n    return target\r\n}\r\n\r\nfunction handleMethod(target: Function, key: String, descriptor) {\r\n    //todo: need find another way with autoBind\r\n\r\n    descriptor = _descriptorHandler(descriptor, key)\r\n\r\n    return descriptor\r\n}\r\n\r\nfunction handleProp(target: Function, key: String, descriptor) {\r\n    console.warn(`@autoBind should not set on class properties.`)\r\n    return descriptor\r\n}\r\n\r\nfunction autoBind(...args) {\r\n    Helpers.handler(args, null, handleClass, handleMethod, handleProp)\r\n}\r\n\r\nexport default autoBind"]}