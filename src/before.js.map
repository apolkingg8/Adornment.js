{"version":3,"sources":["G:\\GitHub\\decorate_js\\src\\before.jsx"],"names":[],"mappings":";;;;;;;;uBAAoB,WAAW;;;;AAE/B,SAAS,iBAAiB,CAAC,UAAU,EAAE,GAAG,EAAE,KAAK,EAAE;AAC/C,QAAI,MAAM,GAAG,qBAAQ,SAAS,CAAC,UAAU,CAAC,CAAA;;AAE1C,cAAU,CAAC,KAAK,GAAG,YAAkB;0CAAN,IAAI;AAAJ,gBAAI;;;AAC/B,YAAM,SAAS,gBAAc,GAAG,AAAE,CAAA;;AAElC,YAAG,IAAI,CAAC,SAAS,CAAC,KAAK,SAAS,EAAE;AAC9B,kBAAM,CAAC,cAAc,CAAC,IAAI,EAAE,SAAS,EAAE;AACnC,0BAAU,EAAE,KAAK;AACjB,4BAAY,EAAE,KAAK;AACnB,wBAAQ,EAAE,IAAI;AACd,qBAAK,EAAE,CAAC;aACX,CAAC,CAAA;;AAEF,mBAAO,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;SAClC,MAAM;AACH,gBAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;;AAEpB,gBAAG,IAAI,CAAC,SAAS,CAAC,IAAI,KAAK,EAAE;AACzB,uBAAO,IAAI,CAAA;aACd,MAAM;AACH,uBAAO,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;aAClC;SACJ;KACJ,CAAA;;AAED,WAAO,UAAU,CAAA;CACpB;;AAED,SAAS,WAAW,CAAC,MAAgB,EAAE,KAAK,EAAE;;AAE1C,yBAAQ,mBAAmB,CAAC,MAAM,EAAE,UAAS,GAAG,EAAE;;AAE9C,YAAG,OAAO,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,UAAU,EAAE;AAC5C,gBAAI,UAAU,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,CAAA;;AAEvE,kBAAM,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,EAAE,iBAAiB,CAAC,UAAU,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,CAAA;SAC1F;KACJ,CAAC,CAAA;;AAEF,WAAO,MAAM,CAAA;CAChB;;AAED,SAAS,YAAY,CAAC,MAAgB,EAAE,GAAW,EAAE,UAAU,EAAE,KAAK,EAAE;;AAEpE,cAAU,GAAG,iBAAiB,CAAC,UAAU,EAAE,GAAG,EAAE,KAAK,CAAC,CAAA;;AAEtD,WAAO,UAAU,CAAA;CACpB;;AAED,SAAS,UAAU,CAAC,MAAgB,EAAE,GAAW,EAAE,UAAU,EAAE,KAAK,EAAE;AAClE,WAAO,CAAC,IAAI,+CAA+C,CAAA;AAC3D,WAAO,UAAU,CAAA;CACpB;;AAED,SAAS,MAAM,CAAC,KAAK,EAAE;;AAEnB,QAAG,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC1B,6BAAQ,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAA;AAC7C,eAAO;KACV;;AAED,WAAO,YAAkB;2CAAN,IAAI;AAAJ,gBAAI;;;AACnB,6BAAQ,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,YAAY,EAAE,UAAU,CAAC,CAAA;KACtE,CAAA;CACJ;;qBAEc,MAAM","file":"before.js","sourcesContent":["import Helpers from './_helper'\r\n\r\nfunction _handleDescriptor(descriptor, key, input) {\r\n    var method = Helpers.getMethod(descriptor)\r\n\r\n    descriptor.value = function(...args) {\r\n        const cacheName = `_before_${key}`\r\n\r\n        if(this[cacheName] === undefined) {\r\n            Object.defineProperty(this, cacheName, {\r\n                enumerable: false,\r\n                configurable: false,\r\n                writable: true,\r\n                value: 1\r\n            })\r\n\r\n            return method.apply(this, args)\r\n        } else {\r\n            this[cacheName] += 1\r\n\r\n            if(this[cacheName] >= input) {\r\n                return null\r\n            } else {\r\n                return method.apply(this, args)\r\n            }\r\n        }\r\n    }\r\n\r\n    return descriptor\r\n}\r\n\r\nfunction handleClass(target: Function, input) {\r\n\r\n    Helpers.forEachClassOwnKeys(target, function(key) {\r\n\r\n        if(typeof target.prototype[key] === \"function\") {\r\n            var descriptor = Object.getOwnPropertyDescriptor(target.prototype, key)\r\n\r\n            Object.defineProperty(target.prototype, key, _handleDescriptor(descriptor, key, input))\r\n        }\r\n    })\r\n\r\n    return target\r\n}\r\n\r\nfunction handleMethod(target: Function, key: String, descriptor, input) {\r\n\r\n    descriptor = _handleDescriptor(descriptor, key, input)\r\n\r\n    return descriptor\r\n}\r\n\r\nfunction handleProp(target: Function, key: String, descriptor, input) {\r\n    console.warn(`@before should not set on class properties.`)\r\n    return descriptor\r\n}\r\n\r\nfunction before(input) {\r\n\r\n    if(typeof input !== \"number\") {\r\n        Helpers.wrongInput('before', 'number', input)\r\n        return;\r\n    }\r\n\r\n    return function(...args) {\r\n        Helpers.handler(args, input, handleClass, handleMethod, handleProp)\r\n    }\r\n}\r\n\r\nexport default before"]}