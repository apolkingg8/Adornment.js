{"version":3,"sources":["debounce.jsx"],"names":[],"mappings":";;;;;;;;sBAAoB,WAAW;;;;AAE/B,SAAS,iBAAiB,CAAC,GAAG,EAAE,UAAU,EAAE,KAAa,EAAE;AACvD,QAAI,MAAM,GAAG,oBAAQ,SAAS,CAAC,UAAU,CAAC,CAAA;;AAE1C,cAAU,CAAC,KAAK,GAAG,YAAkB;;;0CAAN,IAAI;AAAJ,gBAAI;;;AAC/B,YAAI,QAAQ,kBAAgB,GAAG,AAAE,CAAA;;AAEjC,YAAI,SAAS,GAAG,SAAZ,SAAS,GAAQ;AACjB,gBAAI,OAAO,GAAG,UAAU,CAAC,YAAK;AAC1B,4BAAY,CAAC,MAAK,QAAQ,CAAC,CAAC,CAAA;AAC5B,uBAAO,MAAK,QAAQ,CAAC,CAAA;;AAErB,sBAAM,CAAC,KAAK,QAAO,IAAI,CAAC,CAAA;aAC3B,EAAE,KAAK,CAAC,CAAA;;AAET,kBAAM,CAAC,cAAc,QAEjB,QAAQ,EACR;AACI,0BAAU,EAAE,KAAK;AACjB,4BAAY,EAAE,IAAI;AAClB,wBAAQ,EAAE,KAAK;AACf,qBAAK,EAAE,OAAO;aACjB,CACJ,CAAA;SACJ,CAAA;;AAED,YAAG,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,WAAW,EAAE;AACtC,qBAAS,EAAE,CAAA;SACd,MAAM;;AAEH,wBAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAA;AAC5B,qBAAS,EAAE,CAAA;SACd;KACJ,CAAA;;AAED,WAAO,UAAU,CAAA;CACpB;;AAED,SAAS,WAAW,CAAC,MAAgB,EAAE,KAAa,EAAE;;AAElD,wBAAQ,mBAAmB,CAAC,MAAM,EAAE,UAAS,GAAG,EAAE;;AAE9C,YAAG,OAAO,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,UAAU,EAAE;AAC5C,gBAAI,UAAU,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,CAAA;;AAEvE,6BAAiB,CAAC,GAAG,EAAE,UAAU,EAAE,KAAK,CAAC,CAAA;;AAEzC,kBAAM,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,EAAE,UAAU,CAAC,CAAA;SAC3D;KACJ,CAAC,CAAA;;AAEF,WAAO,MAAM,CAAA;CAChB;;AAED,SAAS,YAAY,CAAC,MAAgB,EAAE,GAAW,EAAE,UAAU,EAAE,KAAa,EAAE;;AAE5E,qBAAiB,CAAC,GAAG,EAAE,UAAU,EAAE,KAAK,CAAC,CAAA;;AAEzC,WAAO,UAAU,CAAA;CACpB;;AAED,SAAS,UAAU,CAAC,MAAgB,EAAE,GAAW,EAAE,UAAU,EAAE,KAAa,EAAE;AAC1E,WAAO,CAAC,IAAI,iDAAiD,CAAA;AAC7D,WAAO,UAAU,CAAA;CACpB;;AAED,SAAS,QAAQ,CAAC,KAAa,EAAE;;AAE7B,QAAG,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC1B,4BAAQ,UAAU,CAAC,UAAU,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAA;AAC/C,eAAO;KACV;;AAED,WAAO,YAAkB;2CAAN,IAAI;AAAJ,gBAAI;;;AACnB,4BAAQ,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,YAAY,EAAE,UAAU,CAAC,CAAA;KACtE,CAAA;CACJ;;qBAEc,QAAQ","file":"debounce.js","sourcesContent":["import Helpers from './_helper'\n\nfunction _handleDescriptor(key, descriptor, input: Number) {\n    var method = Helpers.getMethod(descriptor)\n\n    descriptor.value = function(...args) {\n        var propName = `_debounce_${key}`\n\n        var _addTimer = ()=> {\n            var timerId = setTimeout(()=> {\n                clearTimeout(this[propName])\n                delete this[propName]\n                //fixme: how to return it?\n                method.apply(this, args)\n            }, input)\n\n            Object.defineProperty(\n                this,\n                propName,\n                {\n                    enumerable: false,\n                    configurable: true,\n                    writable: false,\n                    value: timerId\n                }\n            )\n        }\n\n        if(typeof this[propName] === \"undefined\") {\n            _addTimer()\n        } else {\n            // clear timeout and add new\n            clearTimeout(this[propName])\n            _addTimer()\n        }\n    }\n\n    return descriptor\n}\n\nfunction handleClass(target: Function, input: Number) {\n\n    Helpers.forEachClassOwnKeys(target, function(key) {\n\n        if(typeof target.prototype[key] === \"function\") {\n            var descriptor = Object.getOwnPropertyDescriptor(target.prototype, key)\n\n            _handleDescriptor(key, descriptor, input)\n\n            Object.defineProperty(target.prototype, key, descriptor)\n        }\n    })\n\n    return target\n}\n\nfunction handleMethod(target: Function, key: String, descriptor, input: Number) {\n\n    _handleDescriptor(key, descriptor, input)\n\n    return descriptor\n}\n\nfunction handleProp(target: Function, key: String, descriptor, input: Number) {\n    console.warn(`@debounce should not set on class properties.`)\n    return descriptor\n}\n\nfunction debounce(input: Number) {\n\n    if(typeof input !== \"number\") {\n        Helpers.wrongInput('debounce', 'number', input)\n        return;\n    }\n\n    return function(...args) {\n        Helpers.handler(args, input, handleClass, handleMethod, handleProp)\n    }\n}\n\nexport default debounce"]}