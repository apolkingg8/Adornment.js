{"version":3,"sources":["memoize.jsx"],"names":[],"mappings":"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","file":"memoize.js","sourcesContent":["import Helpers from './_helper'\n\nfunction _hash(input) {\n    var hash = 0, i, chr, len;\n    if (input.length == 0) return hash;\n    for (i = 0, len = input.length; i < len; i++) {\n        chr   = input.charCodeAt(i);\n        hash  = ((hash << 5) - hash) + chr;\n        hash |= 0;\n    }\n    return hash;\n}\n\nfunction handleClass(target: Function) {\n\n    Helpers.forEachClassOwnKeys(target, function(key) {\n\n        if(typeof target.prototype[key] === \"function\") {\n            var descriptor = Object.getOwnPropertyDescriptor(target.prototype, key),\n                method = Helpers.getMethod(descriptor)\n\n            descriptor.value = function(...args) {\n                const cacheName = `_memoizeCache_${key}`\n\n                if(!this[cacheName]) {\n                    //this[cacheName] = {}\n                    Object.defineProperty(this, cacheName, {\n                        enumerable: false,\n                        configurable: false,\n                        writable: true,\n                        value: {}\n                    })\n                }\n\n                var argHash = _hash(args.toString())\n\n                if(typeof this[cacheName][argHash] === 'undefined') {\n                    this[cacheName][argHash] = method.apply(this, args)\n                }\n\n                return this[cacheName][argHash]\n            }\n\n            Object.defineProperty(target.prototype, key, descriptor)\n        }\n    })\n\n    return target\n}\n\nfunction handleMethod(target: Function, key: String, descriptor) {\n    var method = Helpers.getMethod(descriptor)\n\n    descriptor.value = function(...args) {\n        const cacheName = `_memoizeCache_${key}`\n\n        if(!this[cacheName]) {\n            //this[cacheName] = {}\n            Object.defineProperty(this, cacheName, {\n                enumerable: false,\n                configurable: false,\n                writable: true,\n                value: {}\n            })\n        }\n\n        var argHash = _hash(args.toString())\n\n        if(typeof this[cacheName][argHash] === 'undefined') {\n            this[cacheName][argHash] = method.apply(this, args)\n        }\n\n        return this[cacheName][argHash]\n    }\n\n    return descriptor\n}\n\nfunction handleProp(target: Function, key: String, descriptor) {\n    console.warn(`@memoize should not set on class properties.`)\n    return descriptor\n}\n\nfunction memoize(...args) {\n    Helpers.handler(args, null, handleClass, handleMethod, handleProp)\n}\n\nexport default memoize"]}